<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" th:href="@{/favicon.ico}">

<title>LasPircasApp | Porteria:Ingresos/Egresos Visitas</title>
<!-- Bootstrap core CSS -->
<link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
<!-- Custom styles for this template -->
<link th:href="@{/bootstrap/css/jumbotron.css}" rel="stylesheet">
<link th:href="@{/bootstrap/css/sticky-footer-navbar.css}" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet">
<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}" />
<link rel="stylesheet" th:href="@{/css/select2.min.css}">

</head>
<body>
	<header th:insert="fragments/menu :: menu-principal"> </header>
	<main role="main">
		<hr>
		<div class="container">
			<div class="card">
				<div class="card-header">
					<h4>
						<strong>Listado Ingresos/Egresos Visitas</strong>
					</h4>
					<div class="col-md-12 col-sm-12">
						<select id="selectPropietarios" class="form-control">
							<option th:text="${'Egresar'}" th:value="${''}">
							<option th:each="v : ${visitas}"
								th:text="${v.nombre} + ' ' + ${v.apellido} + '  Dominio: ' + ${v.dominio} + ' ' + ${v.lote} + ' ' + ${v.numero}"
								th:value="${v.id}">
						</select>
						<div th:if="${msg != null}" class='alert alert-success'
							 th:text="${msg}" role='alert'>
						</div>
					</div>
				</div>
				<div class="card-body">
					<table class="table table-hover">
						<thead class="thead-light">
							<tr>
								<th scope="col">Id</th>
								<th scope="col">Nombre</th>
								<th scope="col">Apellido</th>
								<th scope="col">Vehiculo</th>
								<th scope="col">Dominio</th>
								<th scope="col">Lote</th>
								<th scope="col">Casa</th>
								<th scope="col">Categoria</th>
								<th scope="col">Estatus</th>
								<th scope="col">Egreso</th>
								<th scope="col">Ingreso</th>
                                <th scope="col">pulsar</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="r : ${registros}">
								<td th:text="${r.visita.id}"></td>
								<td th:text="${r.visita.nombre}"></td>
								<td th:text="${r.visita.apellido}"></td>
								<td th:text="${r.visita.vehiculo}"></td>
								<td th:text="${r.visita.dominio}"></td>
								<td th:text="${r.visita.lote}"></td>
								<td th:text="${r.visita.numero}"></td>
								<td th:text="${r.visita.categoria}"></td>
								<td th:text="${r.visita.estatus}"></td>
								<td th:text="${r.egreso}"></td>
								<td th:text="${r.ingreso}"></td>
								<td><a th:href="@{/porteros/generarEgreso/{id} (id=${r.id}) }"
									   class="btn btn-success btn-sm" role="button" title="Editar"><i
									   class="fas fa-user-edit" aria-hidden="true"></i>
									</a>
								</td>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<!-- /container -->
	</main>
	<footer class="footer" th:insert="fragments/footer :: pie-pagina">
	</footer>
	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
	<script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/jquery-3.3.1.min.js}"></script>
	<script th:src="@{/js/jquery-ui.min.js}"></script>
	<script th:src="@{/js/select2.min.js}"></script>

	<script>
		$("#selectPropietarios").select2();

		$("#selectPropietarios")
				.change(
						function() {
							console.log("asd")
							window.location.href = "/porteros/generarIngreso?idVisita="	
								+ $("#selectPropietarios").val();
						});
	</script>

</body>
</html>